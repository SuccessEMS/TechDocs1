<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" xml:lang="en-us" style="mc-master-page: url('..\..\..\Resources\MasterPages\emsKiosk.flmsp');">
    <head><title>Install or Upgrade the EMS Kiosk App V44.1 (EMS Kiosk App)</title>
    </head>
    <body>
        <h1>
            <MadCap:concept term="V44.1" />Install or Upgrade the EMS Kiosk App</h1>
        <ol start="1" class="number-list">
            <li>Verify that the <MadCap:xref href="SysReqPrereq.htm">System Requirements and Prerequisites for EMS Kiosk App</MadCap:xref> have&#160;been fulfilled:<ol start="1"><li>Patches</li><li>API</li><li><a href="https://docs.microsoft.com/en-us/aspnet/core/publishing/iis#install-the-net-core-windows-server-hosting-bundle?tabs=aspnetcore2x" title="https://docs.microsoft.com/en-us/aspnet/core/publishing/iis?tabs=aspnetcore2x#install-the-net-core-windows-server-hosting-bundle">.NET Core Windows Server Hosting Bundle</a>:<ol start="1"><li>Run the installer.</li><li>When complete, open a CMD prompt as an Admin.</li><li>Right-click the <span class="bold">Start </span>button and select <span class="bold">Command Prompt (admin)</span>.</li><li>Type <span class="bold">net stop was /y</span> &lt;enter&gt;.</li><li>Type <span class="bold">net start w3svc</span> &lt;enter&gt;.</li></ol></li><li>EMS Platform Services<ol start="1"><li>You may want to test that Platform Services is properly installed by navigating to the&#160;URL it created on install (http://localhost/EmsPlatform).</li><li>To ensure Platform Services is working correctly,&#160;connect to&#160;http://localhost/EmsPlatform/admin&#160;and use an Admin Everyday User&#160;to verify you can log in.&#160;If you see license info, everything is working properly.</li></ol></li></ol></li>
            <li>Uninstall&#160;any old version of EMS Kiosk App.&#160;<p class="box-tip"><span class="bold">TIP:</span>&#160;We recommend that you&#160;take a moment now to record the IIS server, the SQL server name, the EMS DB name, etc.&#160;We also recommend creating a notepad file for the URLs that are generated&#160;for later reference.</p></li>
            <li>Log in to the&#160;<a href="https://portal.emssoftware.com">EMS&#160;Customer Portal</a>&#160;to obtain the latest version of the installation files.</li>
            <li>Load the&#160;<span class="bold">EMS.Kiosk.App.msi</span>&#160;file onto the web server that will be running the EMS Kiosk App.</li>
            <li>Run&#160;<span class="bold">EMS.Kiosk.App.msi</span>.</li>
            <li>The first screen welcomes you to the EMS Kiosk Setup Wizard. Click the&#160;<span class="bold">Next&#160;</span>button to begin the installation process.<div class="TitleandImage"><p class="title">Welcome Screen to the EMS Kiosk Setup Wizard</p><img src="../../../Resources/Images/Kiosk_IG_InstallUpgrade1/Install or Upgrade the EMS.png" alt="EMSKiosk_InstallingUpgrading_KioskSetup.PNG" /></div></li>
            <li>The Destination Folder screen will appear.&#160;<p class="box-note"><span class="bold">NOTE:&#160;</span>The default install folder for the EMS Kiosk App is not under wwwroot but under&#160;<span class="bold">C:\Program Files</span>. However, you can change the location of the default installation folder.</p><div class="TitleandImage"><p class="title">Destination Folder</p><img src="../../../Resources/Images/Kiosk_IG_InstallUpgrade1/Install or Upgrade the EMS_1.png" alt="EMSKiosk_InstallingUpgrading_DestinationFolder.PNG" /></div><p class="box-note"><span class="bold">NOTE:</span>&#160;EMS Kiosk App should&#160;<span class="bold">not&#160;</span>be installed in the same physical directory as other EMS web-based products OR under a site running another version of the EMS Kiosk App.</p></li>
            <li>In the EMS Application Settings screen, enter the&#160;EMS Platform Services URL&#160;and specify the&#160;Virtual Directory Name. See Also&#160;EMS Platform Services Installation Guide.&#160;</li>
        </ol>
        <div class="TitleandImage">
            <p class="title">EMS Application Settings Screen</p>
            <p>
                <img src="../../../Resources/Images/Kiosk_IG_InstallUpgrade1/Install or Upgrade the EMS_2.png" alt="EMSKiosk_InstallingUpgrading_ApplicationSettings.PNG" />
            </p>
        </div>
        <ol start="9" class="number-list">
            <li>Enter your EMS Kiosk App path and click&#160;<span class="bold">Next</span>.&#160;The&#160;Virtual Directory&#160;screen will appear.<div class="TitleandImage"><p class="title">Virtual Directory</p><p><img src="../../../Resources/Images/Kiosk_IG_InstallUpgrade1/Install or Upgrade the EMS_3.png" alt="EMSKiosk_InstallingUpgrading_VirtualDirectory.PNG" /></p></div></li>
            <li>Enter the name you want to give to the virtual directory.&#160;Click&#160;<span class="bold">Next</span>.&#160;The&#160;Ready to Install&#160;screen will appear.<div class="TitleandImage"><p class="title">Ready to Install Screen</p><p><img src="../../../Resources/Images/Kiosk_IG_InstallUpgrade1/Install or Upgrade the EMS_4.png" alt="EMSKiosk_InstallingUpgrading_ReadytoInstall.PNG" /></p></div></li>
            <li>Click the&#160;<span class="bold">Install&#160;</span>button to install EMS Kiosk App.</li>
            <li>Open the&#160;<span class="bold">appsettings.json</span>&#160;file in Notepad. This file can be found in C:\Program Files\EMS Software\EMSKiosk.<p><img src="../../../Resources/Images/Kiosk_IG_InstallUpgrade1/Install or Upgrade the EMS_5.png" alt="Kiosk_IG_Appsettingsjson.PNG" /></p></li>
            <li>Search for the section, "Platform Options." DO NOT&#160;EDIT ANYTHING except the next steps.&#160;If there are multiple (load balanced) nodes, you need to apply the Client Secret to all of them.</li>
            <li>Add a new line below the first {.<br />Type in:<br />“SecureCookies”: false,<p><img src="../../../Resources/Images/Kiosk_IG_InstallUpgrade1/Install or Upgrade the EMS_6.png" alt="PlatformOptions.PNG" class="PDFlarge"></img></p></li>
            <li>Navigate to your Platform Services URL&#160;and log-in.</li>
            <li>Choose the&#160;<span class="bold">Integrations&#160;</span>Area.<p><img src="../../../Resources/Images/Kiosk_IG_InstallUpgrade1/Install or Upgrade the EMS_7.png" alt="Integrations.PNG" class="PDFlarge" /></p></li>
            <li>Select the EMS Kiosk service.<ol start="1"><li>Copy the Client ID.</li><li>In your notepad file, replace the Client ID area between the quotation marks. Do not delete the commas.</li></ol><p><img src="../../../Resources/Images/Kiosk_IG_InstallUpgrade1/Install or Upgrade the EMS_8.png" alt="Kiosk_IG_Commas.PNG" class="PDFlarge"></img></p></li>
            <li>Reset the client secret in the EMS Platform Admin UI:<ol start="1"><li>Visit the Admin UI for you EMS Platform Services install (e.g.,&#160;https://my-company.com/EmsPlatform/admin). You will need a Web User login with Administrative permissions to perform this step.&#160;</li><li>Click the&#160;<span class="bold">Reset Secret</span>&#160;button.<p class="title">Reset Secret Button</p><p><img src="../../../Resources/Images/Kiosk_IG_InstallUpgrade1/Install or Upgrade the EMS_9.png" alt="EMSKiosk_InstallingUpgrading_ResetSecret.PNG" /></p></li><li>A new Client Secret is generated following the reset.<p class="title">New Client Secret</p><p><img src="../../../Resources/Images/Kiosk_IG_InstallUpgrade1/Install or Upgrade the EMS_10.png" alt="EMSKiosk_InstallingUpgrading_NewclientSecret.PNG" /></p></li></ol><ol start="9" MadCap:continue="true"><li>Copy the generated Client Secret after successful reset.&#160;</li></ol><p class="box-note"><span class="bold">NOTE:&#160;</span>You will not be able to retrieve this secret later, instead you will have to reset the secret again to generate a new secret.</p><ol start="9" MadCap:continue="true"><li>In your notepad file, replace the blank area between the QUOTES “” of ClientSecret with this code. Ensure that the quotations remain before and after the ClientSecret and that there are no spaces.&#160;<p class="title">Sample ClientSecret Value</p><p><img src="../../../Resources/Images/Kiosk_IG_InstallUpgrade1/Install or Upgrade the EMS_11.png" alt="EMSKiosk_InstallingUpgrading_SampleClientSecretvalue.PNG"></img></p></li></ol></li>
            <li>Save and close the file. Overwrite the existing appsettings.json file. Ensure your overwrite worked by checking the date (your file should reflect the current date and time.)</li>
            <li>Reboot your server. Conversely, you could:<ol start="1"><li>Open a CMD prompt as admin.</li><li>Type: <span class="bold">net stop was /y</span>&#160;&lt;enter&gt;</li><li>Type: <span class="bold">net start w3svc</span>&#160;&lt;enter&gt;</li></ol></li>
            <li>Clear the temp&#160;cache by closing&#160;your EMS Kiosk App browser window.</li>
            <li>Return to the EMS Platform Admin and set the Active, Enable Logging, and User Auth to&#160;<span class="bold">CHECKED</span>.</li>
            <li>Click&#160;<span class="bold">Save</span>.</li>
        </ol>
        <h2>Provisioning Authentication for the EMS&#160;Kiosk App (for Administrators)</h2>
        <p class="box-note"><span class="bold">NOTE:&#160;</span>For provisioning authentication in the EMS&#160;Kiosk App, only LDAP&#160;and Native authentication methods are supported. </p>
        <ol start="1" class="number-list">
            <li>Navigate to the EMS&#160;Platform Services Admin Portal. Choose the “Everyday User Auth Method” dropdown, and set to either <span class="bold">LDAP&#160;</span>or <span class="bold">EMS&#160;Native</span>. <br /><img src="../Images/Kiosk_IG_InstallUpgrade1.PNG" style="width: 539px;height: 330px;" /><br /></li>
        </ol>
        <ul class="unorder-list">
            <li>If selecting LDAP, ensure LDAP&#160;is configured per <a href="../../../OptionalFeatures/IntegratedAuthentication/V44.1/IntegAuth_LDAPAuthentication.html">EMS&#160;LDAP&#160;authentication requirements</a>.</li>
            <li>If selecting Native authentication, configure the username and password field in the EMS&#160;Desktop Client menu bar. Click Configuration &gt;&#160;Everyday User Applications &gt;&#160;Everyday Users. </li>
        </ul>
        <ol start="2" class="number-list">
            <li>Click&#160;<span class="bold">Save</span>.</li>
        </ol>
        <p class="box-note"><span class="bold">NOTE:</span>&#160;This setting controls the authentication method for EMS&#160;Kiosk App provisioning <b style="text-decoration: underline;">only</b>. Everyday User authentication and validation within the EMS&#160;Kiosk App is managed per profile per Security Parameter. For more information on Profile Security Parameters, see <a href="../ConfigurationGuide/ConfigKioskAppProfiles.htm#Parameters">Parameters Tab</a>. </p>
        <ol start="2" MadCap:continue="true" class="number-list">
            <li><a href="../../../EMSPlatformServices/B_ConfigurationGuide/Platform_ConfigPSinAdminPortal.html#ClearCache">Clear cache in EMS&#160;Platform Services</a> and in the EMS&#160;Web App Admin. </li>
        </ol>
        <p class="box-note"><span class="bold">NOTE:</span> By default, the EMS Kiosk App uses secure cookies. We strongly recommend you use this approach in your production environment. However, you may wish to test without SSL. To disable secure cookies in your test environment, add the following to appsettings.json inside the "PlatformOptions" section:</p>
        <p>
            <img src="../../../Resources/Images/Kiosk_IG_InstallUpgrade1/Install or Upgrade the EMS_12.png" alt="EMSKiosk_InstallingUpgrading_Cookie.PNG" class="PDFlarge">
            </img>
        </p>
    </body>
</html>